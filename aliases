# Productivity
alias w="cd ~/Workspaces"
alias c="cd ~/Workspaces/claude"
alias op="cd ~/Workspaces/opencode"
alias reload="exec zsh"

# Symlinks
alias symlinkls="find . -maxdepth 1 -type l -ls"
alias symlinkrm="find . -maxdepth 1 -type l -delete"

# Git
alias greadme="git add README.md && git commit -m 'chore: Update README.md' && git push"

# Initialize git, stage all, and generate commit message from diff
commit() {
  if [[ ! -d .git ]]; then
    echo "Initializing git repository..."
    git init
  fi

  echo "Staging all files..."
  git add -A

  local diff=$(git diff --cached --stat)
  if [[ -z "$diff" ]]; then
    echo "No changes to commit."
    return 0
  fi

  echo "Generating commit message..."
  local msg=$(git diff --cached | claude -p "Generate a concise conventional commit message for these changes. Output only the commit message, nothing else.")

  echo "Proposed commit message: $msg"
  read "confirm?Commit with this message? [y/N] "
  if [[ "$confirm" =~ ^[Yy]$ ]]; then
    git commit -m "$msg"
  else
    echo "Commit aborted. Changes remain staged."
  fi
}

# Git Worktrees
alias gwl="git worktree list"
alias gwa="git worktree add"
alias gwr="git worktree remove"
alias gwp="git worktree prune"

gwab() {
  git worktree add -b "$1" "../$(basename $(pwd))-$1"
}

gwae() {
  git worktree add "../$(basename $(pwd))-$1" "$1"
}

gwao() {
  local worktree_path="../$(basename $(pwd))-$1"
  git worktree add --track -b "$1" "$worktree_path" "origin/$1"
  if [[ -f "$worktree_path/package.json" ]]; then
    echo "Installing dependencies..."
    (cd "$worktree_path" && npm install)
  fi
  cd "$worktree_path"
}

gwcd() {
  local wt=$(git worktree list | grep -i "$1" | head -1 | awk '{print $1}')
  [[ -n "$wt" ]] && cd "$wt" || echo "No worktree matching '$1'"
}

# Tmux
alias tmux="tmux -2"
alias tmux2="tmux -2"
alias tmux3="tmux -2"

# Claude Code Container
alias bccc="podman build -t claude-code-sandbox ~/Workspaces/leovanhaaren/llm-container"
alias ccc="podman run -it -v \$(pwd):/app -v ~/.claude:/home/claude/.claude -v ~/.claude.json:/home/claude/.claude.json claude-code-sandbox"

# Local overrides
[[ -f ~/.aliases.local ]] && source ~/.aliases.local

# Z.AI + Claude Code launcher
zai() {
  pass-cli inject --in-file "${DOTFILES_DIR}/claude/zai.zsh" | while read -r line; do
    eval "$line"
  done

  claude "$@"
}

mm() {
  pass-cli inject --in-file "${DOTFILES_DIR}/claude/minimax.zsh" | while read -r line; do
    eval "$line"
  done

  claude "$@"
}

